<!doctype html>
<html>
  <head>
    <title>Intelligent CCTV</title>
    <link rel="stylesheet" type="text/css" href="{{url_for('static',filename='style.css')}}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  </head>
  
  <body>
    <nav class="navbar navbar-dark bg-dark" aria-label="Dark offcanvas navbar">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">지능형 감시 카메라 - Intelligent CCTV</a>
      </div>
    </nav>

    <div id="container" class="shadow p-3 mb-5 bg-body rounded">
      <img
      id="video"
      crossorigin="anonymous"
      src="http://172.20.10.9:8000/stream.mjpg"
      onerror=this.src="{{url_for('static',filename='img/nosignal.jpg')}}"
      />
      <canvas id="canvas"></canvas>
    </div>

    <div id="container" class="shadow p-3 mb-5 bg-body rounded">  
      <div id="realtime-info">
        <div class="spinner-grow text-primary spinner-grow-sm" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
        실시간 감시 작동중...
      </div>

      <div id="detect-info" class="alert alert-success" role="alert">
        사람이 감지되지 않음
      </div>

      <div class="mb-3">
        <label for="formGroupExampleInput" class="form-label">경고 방송 멘트</label>
        <input type="text" class="form-control" id="mention" placeholder="멘트 입력" value="접근금지">
      </div>

      <div class="mb-3">
        <label for="customRange2" class="form-label">탐지 민감도:&nbsp;</label>
        <span id="range-value">0.4</span>
        <input type="range" class="form-range" min="0.1" vlaue="0.4" max="0.7" step="0.05" id="range" oninput="document.getElementById('range-value').innerHTML=this.value;">
      </div>

      <div class="form-check form-switch" id="detect-wrapper">
        <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault">
        <label class="form-check-label" for="flexSwitchCheckDefault">감지 시 경고 방송 및 메세지 전송을 수행합니다.</label>
      </div>
     
      <div id = "logo-wrapper">
        <img id ="tensor" src="{{url_for('static',filename='img/logo.png')}}"/>
      </div>
    </div>    

    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.11.0/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd@2.2.2/dist/coco-ssd.min.js"></script>
    <script type="text/javascript" src="{{url_for('static',filename='main.js')}}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

  </body>

  </html>
